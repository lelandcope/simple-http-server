## LogFile
fs      = require 'fs'
url		= require 'url'
colors  = require 'colors'
moment	= require 'moment'

module.exports = (root)->
	root = root || './';

	return (req, res, next)->
		try
			pathname = decodeURI url.parse(req.url).pathname
		catch error
			console.log error

		fs.stat process.cwd()+'/'+root+pathname, (err, stat)->
			if err
				console.log '[%s] Error serving %s - File Not Found'.red, moment().format('YYYY-MM-DD HH:mm:ss'), pathname
			else
				console.log '[%s] %s', moment().format('YYYY-MM-DD HH:mm:ss'), pathname

		next()